<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
</body>
<script>
    //********
//    "use strict";

    var a = 100;
    function f1() {
        var b = 200;
        function f2() {
            var c = 300;
            //此处a,b定义在f2外面，所以说a,b相对f2来说是自由变量
            console.log(a);//打印结果是100，编译器会一直往外层找a，与原型链上的a无关。注意作用域链与原型链的区别
            console.log(b);
            console.log(c);
        }

        f2.__proto__.a = 'b';
        f2.prototype.a = 'a';
        f2();
        console.log(f2.a);//打印结果b,因为属性是沿着__proto__往上找，而不是沿着prototype往上找。
    }

    f1();
    //********
    var hello = 'outer hello';
    var obj = {
        fn1: function () {
            var hello = 'inner hello';
            function sayHello() {
                console.log('sayHello:',hello);
                //注意，如果在顶部开启严格模式"use strict"，则this为undefined
                //因为在严格模式下，未指定环境对象而调用函数，this是不会转型为window《javascript高级编程》p117
                console.log('sayHello:',this);
            }

            console.log('obj.fn scope:',this);
            sayHello();
        },
        fn2:function () {
            console.log('fn2');
        }
    };

    obj.fn1();
</script>
</html>