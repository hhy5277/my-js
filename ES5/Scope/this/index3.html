<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body></body>
<script>
    var foo = {
        bar: function () {
            console.log(this);
        }
    };

    foo.bar(); // Reference, OK => foo
    (foo.bar)(); // Reference, OK => foo

    (foo.bar = foo.bar)(); // global?
    (false || foo.bar)(); // global?
    (foo.bar, foo.bar)(); // global?
    //触发调用GetValue方法，于是相应地就会丢失原先的引用类型值，变成了函数类型，this的值就变成了全局对象了。


//    引用类型的值只有可能是以下两种情况：
//
//    当处理一个标识符的时候
//    或者进行属性访问的时候



    function GetValue(value) {

        if (Type(value) != Reference) {
            return value;
        }

        var base = GetBase(value);

        if (base === null) {
            throw new ReferenceError;
        }

        return base.[[Get]](GetPropertyName(value));

    }
</script>
</html>

