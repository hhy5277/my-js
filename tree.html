<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>根据叶子节点构建树</title>
</head>
<body>
<script>
function getTreeDepth(leavesCount) {
    // 求以2为底的对数 再加上1 即树的深度
    return Math.log(leavesCount) / Math.LN2 + 1;
}

function createTree(leaves, symbol) {
    const treeDepth = getTreeDepth(leaves.length);
    const root = { name: symbol, depth: 1 };// depth记录当前节点所在层次
    const queue = [root];
    let node = null;
    let leavesIdx = 0; // 叶子节点指针

    while (queue.length) {
        // 从队头弹出节点
        node = queue.shift();

        const currentDepth = node.depth;
        const nextDepth = currentDepth + 1;

        if (currentDepth === treeDepth) {// 到叶子层结束
            return root;
        }

        let leftChild = null;
        let rightChild = null;

        if (currentDepth < treeDepth - 1) {
            leftChild = { name: symbol, depth: nextDepth };
            rightChild = { name: symbol, depth: nextDepth };
        } else {// 到叶子层的上一层，则添加叶子为孩子
            leftChild = { name: leaves[leavesIdx], depth: nextDepth };
            leavesIdx += 1; // 移动叶子指针
            rightChild = { name: leaves[leavesIdx], depth: nextDepth };
            leavesIdx += 1;
        }

        queue.push(leftChild);
        queue.push(rightChild);
        node.children = [leftChild, rightChild];
    }
}

const root = createTree(['A', 'B', 'C', 'D', 'E', 'F', 'F', 'G'], '?');
console.log(root);
</script>
</body>
</html>
